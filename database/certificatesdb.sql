-- MySQL Script generated by MySQL Workbench
-- Thu Jan 14 15:55:11 2021
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema certificatesdb
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema certificatesdb
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `certificatesdb` DEFAULT CHARACTER SET utf8 ;
USE `certificatesdb` ;

-- -----------------------------------------------------
-- Table `certificatesdb`.`gift_certificates`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `certificatesdb`.`gift_certificates` ;

CREATE TABLE IF NOT EXISTS `certificatesdb`.`gift_certificates` (
  `certificateId` BIGINT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(250) NOT NULL,
  `description` VARCHAR(250) NULL,
  `price` DECIMAL(10,2) NOT NULL,
  `duration` INT NOT NULL,
  `create_date` TIMESTAMP NOT NULL,
  `last_update_date` TIMESTAMP NOT NULL,
  PRIMARY KEY (`certificateId`),
  UNIQUE INDEX `name_UNIQUE` (`name` ASC) VISIBLE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `certificatesdb`.`tags`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `certificatesdb`.`tags` ;

CREATE TABLE IF NOT EXISTS `certificatesdb`.`tags` (
  `tagId` BIGINT NOT NULL AUTO_INCREMENT,
  `tagName` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`tagId`),
  UNIQUE INDEX `tagName_UNIQUE` (`tagName` ASC) VISIBLE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `certificatesdb`.`certificates_has_tags`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `certificatesdb`.`certificates_has_tags` ;

CREATE TABLE IF NOT EXISTS `certificatesdb`.`certificates_has_tags` (
  `certificateId` BIGINT NOT NULL,
  `tagId` BIGINT NOT NULL,
  PRIMARY KEY (`certificateId`, `tagId`),
  INDEX `fk_gift_certificates_has_tags_tags1_idx` (`tagId` ASC) VISIBLE,
  INDEX `fk_gift_certificates_has_tags_gift_certificates_idx` (`certificateId` ASC) VISIBLE,
  CONSTRAINT `fk_gift_certificates_has_tags_gift_certificates`
    FOREIGN KEY (`certificateId`)
    REFERENCES `certificatesdb`.`gift_certificates` (`certificateId`)
    ON DELETE CASCADE
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_gift_certificates_has_tags_tags1`
    FOREIGN KEY (`tagId`)
    REFERENCES `certificatesdb`.`tags` (`tagId`)
    ON DELETE CASCADE
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- -----------------------------------------------------
-- Data for table `certificatesdb`.`gift_certificates`
-- -----------------------------------------------------
START TRANSACTION;
USE `certificatesdb`;
INSERT INTO `certificatesdb`.`gift_certificates` (`certificateId`, `name`, `description`, `price`, `duration`, `create_date`, `last_update_date`) VALUES (1, 'Полет на дирижабле', 'Незабываемое ощущение', 450, 1, '2021-01-03 00:20:41', '2021-01-03 00:20:41');
INSERT INTO `certificatesdb`.`gift_certificates` (`certificateId`, `name`, `description`, `price`, `duration`, `create_date`, `last_update_date`) VALUES (2, 'Массаж', 'Всего тела', 100, 1, '2021-01-03 00:20:41', '2021-01-03 00:20:41');
INSERT INTO `certificatesdb`.`gift_certificates` (`certificateId`, `name`, `description`, `price`, `duration`, `create_date`, `last_update_date`) VALUES (3, 'Прыжок с парашутом', 'С высоты 10 км', 200, 1, '2021-01-03 00:20:41', '2021-01-03 00:20:41');
INSERT INTO `certificatesdb`.`gift_certificates` (`certificateId`, `name`, `description`, `price`, `duration`, `create_date`, `last_update_date`) VALUES (4, 'Cinema', 'All films during 15 days', 500, 15, '2021-01-03 00:20:41', '2021-01-03 00:20:41');
INSERT INTO `certificatesdb`.`gift_certificates` (`certificateId`, `name`, `description`, `price`, `duration`, `create_date`, `last_update_date`) VALUES (5, 'Туристическое оборудование', 'Купи 10 ледорубов и получи 11 в подарок!', 400, 1, '2021-01-03 00:20:41', '2021-01-03 00:20:41');

COMMIT;


-- -----------------------------------------------------
-- Data for table `certificatesdb`.`tags`
-- -----------------------------------------------------
START TRANSACTION;
USE `certificatesdb`;
INSERT INTO `certificatesdb`.`tags` (`tagId`, `tagName`) VALUES (1, 'Отдых');
INSERT INTO `certificatesdb`.`tags` (`tagId`, `tagName`) VALUES (2, 'Развлечение');
INSERT INTO `certificatesdb`.`tags` (`tagId`, `tagName`) VALUES (3, 'Отпуск');
INSERT INTO `certificatesdb`.`tags` (`tagId`, `tagName`) VALUES (4, 'Туризм');
INSERT INTO `certificatesdb`.`tags` (`tagId`, `tagName`) VALUES (5, 'Поход');
INSERT INTO `certificatesdb`.`tags` (`tagId`, `tagName`) VALUES (6, 'Здоровье');
INSERT INTO `certificatesdb`.`tags` (`tagId`, `tagName`) VALUES (7, 'Экстрим');
INSERT INTO `certificatesdb`.`tags` (`tagId`, `tagName`) VALUES (8, 'Массаж');

COMMIT;


-- -----------------------------------------------------
-- Data for table `certificatesdb`.`certificates_has_tags`
-- -----------------------------------------------------
START TRANSACTION;
USE `certificatesdb`;
INSERT INTO `certificatesdb`.`certificates_has_tags` (`certificateId`, `tagId`) VALUES (1, 1);
INSERT INTO `certificatesdb`.`certificates_has_tags` (`certificateId`, `tagId`) VALUES (1, 2);
INSERT INTO `certificatesdb`.`certificates_has_tags` (`certificateId`, `tagId`) VALUES (1, 7);
INSERT INTO `certificatesdb`.`certificates_has_tags` (`certificateId`, `tagId`) VALUES (2, 1);
INSERT INTO `certificatesdb`.`certificates_has_tags` (`certificateId`, `tagId`) VALUES (2, 6);
INSERT INTO `certificatesdb`.`certificates_has_tags` (`certificateId`, `tagId`) VALUES (2, 8);
INSERT INTO `certificatesdb`.`certificates_has_tags` (`certificateId`, `tagId`) VALUES (3, 2);
INSERT INTO `certificatesdb`.`certificates_has_tags` (`certificateId`, `tagId`) VALUES (3, 7);
INSERT INTO `certificatesdb`.`certificates_has_tags` (`certificateId`, `tagId`) VALUES (4, 1);
INSERT INTO `certificatesdb`.`certificates_has_tags` (`certificateId`, `tagId`) VALUES (4, 2);
INSERT INTO `certificatesdb`.`certificates_has_tags` (`certificateId`, `tagId`) VALUES (4, 3);
INSERT INTO `certificatesdb`.`certificates_has_tags` (`certificateId`, `tagId`) VALUES (5, 1);
INSERT INTO `certificatesdb`.`certificates_has_tags` (`certificateId`, `tagId`) VALUES (5, 3);
INSERT INTO `certificatesdb`.`certificates_has_tags` (`certificateId`, `tagId`) VALUES (5, 4);
INSERT INTO `certificatesdb`.`certificates_has_tags` (`certificateId`, `tagId`) VALUES (5, 5);
INSERT INTO `certificatesdb`.`certificates_has_tags` (`certificateId`, `tagId`) VALUES (5, 7);

COMMIT;

